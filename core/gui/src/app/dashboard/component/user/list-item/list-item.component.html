<nz-card
  [nzBodyStyle]="{padding: '5px'}"
  class="list-item-card">
  <div
    [routerLink]="entryLink"
    nz-row
    nzAlign="middle">

    <!-- Icon Column -->
    <div nz-col nzSpan="1">
      <div class="type-icon-div">
        <i nz-icon [nzType]="iconType"></i>
      </div>
    </div>

    <!-- ID Column -->
    <div nz-col nzSpan="1">
      <div class="resource-id">
        <em>#{{ entry.id }}</em>
      </div>
    </div>

    <div nz-col nzSpan="10">
      <!-- Name -->
      <div
        class="resource-name truncate-single-line"
        *ngIf="!editingName"
        (click)="isPrivateSearch ? onEditName($event) : null">
        {{ entry.name }}
      </div>
      <input
        *ngIf="editingName"
        #nameInput
        class="resource-name-edit-input"
        [(ngModel)]="entry.name"
        (blur)="confirmUpdateWorkflowCustomName(entry.name)"
        (keydown.enter)="confirmUpdateWorkflowCustomName(entry.name)"
        (click)="$event.stopPropagation()"
        autofocus>

      <!-- Description -->
      <div
        class="resource-description-container"
        (click)="isPrivateSearch ? onEditDescription($event) : null">
        <div
          class="resource-description truncate-single-line"
          *ngIf="!editingDescription">
          {{ entry.description || "Click to add a description..." }}
        </div>
        <textarea
          *ngIf="editingDescription"
          #descriptionInput
          class="resource-description-edit-textarea"
          [(ngModel)]="entry.description"
          (blur)="confirmUpdateWorkflowCustomDescription(entry.description)"
          (keydown.enter)="confirmUpdateWorkflowCustomDescription(entry.description)"
          (click)="$event.stopPropagation()"
          autofocus></textarea>
      </div>
    </div>

    <div
      nz-col
      nzSpan="12">
      <div class="edit-info">
        <div class="resource-owner">
          <texera-user-avatar
            class="user-avatar"
            googleAvatar=""
            userColor="#1E90FF"
            [userName]="entry.ownerName || 'User'">
          </texera-user-avatar>
        </div>
        <div class="resource-time-info">Created: {{ formatTime(entry.creationTime) }}</div>
        <div class="resource-time-info">Edited: {{ formatTime(entry.lastModifiedTime) }}</div>
      </div>
    </div>
  </div>

  <div
    *ngIf="isPrivateSearch"
    class="button-group">
    <button
      nz-button
      nzType="text"
      class="dropdown-item"
      (click)="onClickOpenShareAccess()">
      <i
        nz-icon
        nzTheme="outline"
        nzType="share-alt"></i>
    </button>
    <button
      nz-button
      nzType="text"
      *ngIf="entry.type==='workflow'"
      class="dropdown-item"
      (click)="duplicated.emit()">
      <i
        nz-icon
        nzTheme="outline"
        nzType="copy"></i>
    </button>
    <button
      nz-button
      nzType="text"
      *ngIf="entry.type==='workflow'"
      class="dropdown-item"
      (click)="onClickDownload()">
      <i
        nz-icon
        nzType="cloud-download"
        nzTheme="outline"></i>
    </button>
    <button
      nz-button
      nzType="text"
      class="dropdown-item"
      (nzOnConfirm)="deleted.emit()"
      nz-popconfirm
      nzPopconfirmTitle="Confirm to delete this workflow.">
      <i
        nz-icon
        nzTheme="outline"
        nzType="delete"></i>
    </button>
  </div>
</nz-card>
