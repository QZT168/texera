<nz-list-item class="dataset-list-item">
  <nz-list-item-meta>
    <!-- Margin need only when the checkbox is not visible -->
    <nz-list-item-meta-avatar [ngStyle]="{ 'margin-left': editable ? 'none' : '16px' }">
      <label
        *ngIf="editable"
        nz-checkbox
        class="dataset-item-checkbox"
        id="{{environment.eid}}"
        [(ngModel)]="entry.checked"></label>
      <nz-avatar
        [ngStyle]="{ 'background-color': 'grey', 'vertical-align': 'middle' }"
        [nzGap]="4"
        [nzText]="'' + environment.eid"
        nzSize="default"></nz-avatar>
    </nz-list-item-meta-avatar>

    <!-- editable name of saved dataset -->
    <nz-list-item-meta-title class="meta-title-container">
      <div class="dataset-item-meta-title">
        <a
          *ngIf="!editingName; else customDatasetTitle "
          [routerLink]="ROUTER_ENVIRONMENT_BASE_URL + '/' + environment.eid"
          class="environment-name"
        >{{ environment.name }}</a
        >
        <ng-template #customDatasetTitle>
          <input
            #customName
            (focusout)="confirmUpdateDatasetCustomName(customName.value)"
            (keyup.enter)="confirmUpdateDatasetCustomName(customName.value)"
            placeholder="{{ environment.name }}"
            value="{{ environment.name }}" />
        </ng-template>
        <button
          *ngIf="editable"
          (click)="editingName = true"
          nz-button
          mat-card-title="Customize Environment Name"
          nz-tooltip="Customize Environment Name"
          nzSize="small"
          nzTooltipPlacement="bottom"
          nzType="text">
          <i
            nz-icon
            nzTheme="outline"
            nzType="edit"></i>
        </button>
        <button
          *ngIf="editable"
          (click)="editingDescription = true"
          nz-button
          nz-tooltip="Add Description"
          nzSize="small"
          nzTooltipPlacement="bottom"
          nzType="text"
          class="add-description-btn">
          <i
            nz-icon
            nzTheme="outline"
            nzType="plus-square"></i>
        </button>
<!--        <i-->
<!--          class="dataset-is-owner-icon"-->
<!--          *ngIf="entry.dataset.isOwner"-->
<!--          nz-tooltip="You are the owner"-->
<!--          nzTooltipPlacement="bottom"-->
<!--          nz-icon-->
<!--          nzTheme="outline"-->
<!--          nzType="user"></i>-->
        <!--        <i-->
        <!--          *ngIf="!entry.dataset.isOwner"-->
        <!--          nz-tooltip="{{-->
        <!--                          entry.dataset.accessLevel-->
        <!--                      }} access shared by {{ entry.dataset.ownerName }}"-->
        <!--          nzTooltipPlacement="bottom"-->
        <!--          nz-icon-->
        <!--          nzTheme="outline"-->
        <!--          nzType="team"></i>-->
      </div>
    </nz-list-item-meta-title>

    <!-- editable description of saved dataset -->
    <nz-list-item-meta-description>
      <div class="environment-item-meta-description">
        <label
          *ngIf="!editingDescription; else customDatasetDescription "
          (click)="editingDescription = editable"
          class="environment-description">
          {{ environment.description }}
        </label>
        <ng-template #customDatasetDescription>
          <input
            title="Description"
            #customDescription
            (focusout)="confirmUpdateEnvironmentCustomDescription(customDescription.value)"
            (keyup.enter)="confirmUpdateEnvironmentCustomDescription(customDescription.value)"
            class="environment-editable-description"
            value="{{ environment.description }}"
            maxlength="500" />
        </ng-template>
      </div>
    </nz-list-item-meta-description>

    <!-- last access and created date of saved dataset -->
    <!--    <nz-list-item-meta-description class="metadata-container">-->
    <!--      <span>Last Modified: {{ dataset.lastModifiedTime | date: "yyyy-MM-dd HH:mm" }}</span>-->
    <!--      <span>Created: {{ dataset.creationTime | date: "yyyy-MM-dd HH:mm" }}</span>-->
    <!--    </nz-list-item-meta-description>-->
  </nz-list-item-meta>

  <ul nz-list-item-actions>
    <nz-list-item-action>
      <button
        (click)="onClickOpenShareAccess()"
        nz-button
        nz-tooltip="Share the environment {{
                      environment.name
                  }} to others"
        nzTooltipPlacement="bottom"
        type="button">
        <i
          nz-icon
          nzTheme="outline"
          nzType="share-alt"></i>
      </button>
    </nz-list-item-action>
    <nz-list-item-action>
      <button
        (click)="onClickDownloadDataset()"
        nz-button
        nz-tooltip="Download the environment {{
                      environment.name
                  }}"
        nzTooltipPlacement="bottom"
        type="button">
        <i
          nz-icon
          nzType="cloud-download"
          nzTheme="outline"></i>
      </button>
    </nz-list-item-action>
<!--    <nz-list-item-action *ngIf="editable">-->
<!--      <button-->
<!--        (nzOnConfirm)="deleted.emit()"-->
<!--        nz-popconfirm-->
<!--        nzPopconfirmTitle="Confirm to delete this environment.">-->
<!--&lt;!&ndash;        [disabled]="!entry.environment.isOwner"&ndash;&gt;-->
<!--        class="delete-dataset-btn"-->
<!--        nz-button-->
<!--        nz-tooltip="Delete the environment {{-->
<!--                      environment.name-->
<!--                  }}"-->
<!--        nzTooltipPlacement="bottom">-->
<!--        <i-->
<!--          nz-icon-->
<!--          nzTheme="outline"-->
<!--          nzType="delete"></i>-->
<!--      </button>-->
<!--    </nz-list-item-action>-->
  </ul>
</nz-list-item>
