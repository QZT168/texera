<div [class]="isMaximized ? 'file-display-container maximized' : 'file-display-container not-maximized'">
  <div class="file-display-area">
    <div *ngIf="isLoading">
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    </div>
    <pdf-viewer
      *ngIf="displayPdf && fileURL"
      [src]="fileURL"
      [render-text]="true"
      [original-size]="false"
      style="width: 100%; height: 100%; margin: auto">
    </pdf-viewer>

    <!-- Display Table(CSV / XLSX) -->
    <nz-table
      [nzFrontPagination]="true"
      [nzShowPagination]="true"
      [nzPageSize]="10"
      [nzData]="tableContent"
      *ngIf="displayCSV || displayXlsx">
      <thead>
        <tr>
          <th *ngFor="let column of tableDataHeader">{{ column }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of tableContent">
          <td *ngFor="let cell of row">{{ cell }}</td>
        </tr>
      </tbody>
    </nz-table>

    <!-- Display Image -->
    <div *ngIf="displayImage && safeFileURL">
      <img
        [src]="safeFileURL"
        alt="{{filePath}}"
        (click)="toggleImageModal()"
        style="width: 50%; height: 70%; margin: auto" />
    </div>

    <!-- Full-size image modal -->
    <div
      *ngIf="showImageModal"
      class="image-modal"
      (click)="toggleImageModal()">
      <img
        [src]="safeFileURL"
        alt="{{filePath}}"
        class="full-size-image" />
    </div>

    <!-- Display Markdown -->
    <div *ngIf="displayMarkdown">
      <markdown [data]="textContent"></markdown>
    </div>

    <!-- Display JSON -->
    <div *ngIf="displayJson">
      <ngx-json-viewer [json]="textContent"></ngx-json-viewer>
    </div>

    <!-- Display MP4 Video -->
    <div *ngIf="displayMP4 && safeFileURL">
      <video
        controls
        [src]="safeFileURL">
        Your browser does not support the video tag.
      </video>
    </div>

    <!-- Display MP3 -->
    <div *ngIf="displayMP3 && safeFileURL">
      <audio
        controls
        [src]="safeFileURL">
        Your browser does not support the audio element.
      </audio>
    </div>

    <!-- Display Plain Text -->
    <div *ngIf="displayPlainText">{{ textContent }}</div>

    <!-- File Loading Error -->
    <div *ngIf="isFileLoadingError">
      <h3>File loading encounters error</h3>
    </div>

    <!-- File Size Too Large -->
    <div *ngIf="!isFileSizeLoadable">
      <h3>File is too large to be loaded</h3>
    </div>
  </div>
</div>
